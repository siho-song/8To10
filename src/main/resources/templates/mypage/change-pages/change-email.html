<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>이메일 변경</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" href="styles.css">
</head>
<body>
<!--<div class="main-header">-->
<!--    <div class="logo">로고</div>-->
<!--    <div class="navigation">-->
<!--        <nav>-->
<!--            <ul>-->
<!--                <div class="image-container" data-alt="마이페이지">-->
<!--                    <a href="/mypage" class="image-link">-->
<!--                        <img th:src="@{/images/mypage.png}" src="/images/mypage.png" alt="마이페이지">-->
<!--                    </a>-->
<!--                </div>-->
<!--                <div class="image-container" data-alt="커뮤니티">-->
<!--                    <a href="/community" class="image-link">-->
<!--                        <img th:src="@{/images/community.png}" src="images/community.png" alt="커뮤니티">-->
<!--                    </a>-->
<!--                </div>-->
<!--                <div class="image-container" data-alt="홈">-->
<!--                    <a href="/home" class="image-link">-->
<!--                        <img th:src="@{/images/home.png}" src="images/home.png" alt="홈">-->
<!--                    </a>-->
<!--                </div>-->
<!--            </ul>-->
<!--        </nav>-->
<!--    </div>-->
<!--</div>-->

<!--<div class="change-form-container">-->
<!--    <div class="change-form-content">-->
<!--        <h2>이메일 변경</h2>-->
<!--        <div class="change-form-group">-->
<!--            <label for="email">이메일</label>-->
<!--            <input type="email" id="email" name="email" placeholder="새로운 이메일">-->
<!--        </div>-->
<!--        <div class="change-form-group">-->
<!--            <label for="password">계정 비밀번호</label>-->
<!--            <input type="password" id="password" name="password" placeholder="계정 비밀번호">-->
<!--        </div>-->
<!--        <div class="note">-->
<!--            ※ 반드시 본인의 이메일을 입력해주세요.<br>-->
<!--            ※ 계정 분실 시 아이디/비밀번호 찾기, 개인정보 관련 주요 고지사항 안내 등에 사용됩니다.-->
<!--        </div>-->
<!--        <button class="change-button">이메일 변경</button>-->
<!--    </div>-->
<!--</div>-->

<div class="main-header">
    <div class="logo">로고</div>
    <div class="navigation">
        <nav>
            <ul>
                <div class="image-container" data-alt="마이페이지">
                    <a href="/mypage" class="image-link">
                        <img th:src="@{/images/mypage.png}" src="/images/mypage.png" alt="마이페이지">
                    </a>
                </div>
                <div class="image-container" data-alt="커뮤니티">
                    <a href="/community" class="image-link">
                        <img th:src="@{/images/community.png}" src="images/community.png" alt="커뮤니티">
                    </a>
                </div>
                <div class="image-container" data-alt="홈">
                    <a href="/home" class="image-link">
                        <img th:src="@{/images/home.png}" src="images/home.png" alt="홈">
                    </a>
                </div>
            </ul>
        </nav>
    </div>
</div>

<div class="change-form-container">
    <div class="change-form-content">
        <h2>이메일 변경</h2>
        <div class="change-form-group">
            <label for="email">이메일</label>
            <div class="input-with-button">
                <input type="email" id="email" name="email" placeholder="새로운 이메일" required>
                <button class="verify-email-btn" onclick="sendVerificationCode()">인증</button>
            </div>
            <span id="email-error" class="error-message"></span>

        </div>
        <div class="change-form-group" id="verification-group" style="display: none;">
            <label for="verification-code">인증 번호</label>
            <div class="input-with-button">
                <input type="text" id="verification-code" name="verification-code" placeholder="인증 번호" required>
                <button class="verify-code-btn" onclick="verifyCode()">인증하기</button>
            </div>
            <span id="verification-error" class="error-message"></span>
        </div>
        <div class="change-form-group">
            <label for="password">계정 비밀번호</label>
            <input type="password" id="password" name="password" placeholder="계정 비밀번호" required>
            <span id="password-error" class="error-message"></span>
        </div>
        <div class="note">
            ※ 반드시 본인의 이메일을 입력해주세요.<br>
            ※ 계정 분실 시 아이디/비밀번호 찾기, 개인정보 관련 주요 고지사항 안내 등에 사용됩니다.
        </div>
        <button class="change-button">이메일 변경</button>
    </div>
</div>


<script>
    // function sendVerificationCode() {
    //     // 여기서 이메일로 인증 코드를 전송하는 코드를 구현합니다.
    //     // 지금은 단순히 알림을 띄우는 것으로 대체합니다.
    //     alert('인증 코드가 이메일로 발송되었습니다.');
    //     document.getElementById('verification-group').style.display = 'block';
    // }
    //
    // function verifyCode() {
    //     // 여기서 사용자가 입력한 인증 코드를 검증하는 코드를 구현합니다.
    //     // 지금은 단순히 알림을 띄우는 것으로 대체합니다.
    //     const code = document.getElementById('verification-code').value;
    //     const verificationError = document.getElementById('verification-error');
    //     if (code === '123456') { // 예시 인증 코드
    //         alert('인증에 성공했습니다.');
    //         verificationError.textContent = '';
    //     } else {
    //         verificationError.textContent = '인증 코드가 올바르지 않습니다.';
    //     }
    // }
    //
    // function validateEmail() {
    //     const email = document.getElementById('email').value;
    //     const emailError = document.getElementById('email-error');
    //     const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    //
    //     if (!email) {
    //         emailError.textContent = '이메일을 입력해 주세요.';
    //         return false;
    //     } else if (!emailRegex.test(email)) {
    //         emailError.textContent = '유효한 이메일 주소를 입력해 주세요.';
    //         return false;
    //     } else {
    //         emailError.textContent = '';
    //         return true;
    //     }
    // }
    //
    // function validatePassword() {
    //     const password = document.getElementById('password').value;
    //     const passwordError = document.getElementById('password-error');
    //
    //     if (!password) {
    //         passwordError.textContent = '비밀번호를 입력해 주세요.';
    //         return false;
    //     } else {
    //         passwordError.textContent = '';
    //         return true;
    //     }
    // }
    //
    // function validateForm() {
    //     const isEmailValid = validateEmail();
    //     const isPasswordValid = validatePassword();
    //     const verificationError = document.getElementById('verification-error');
    //
    //     if (!isEmailValid || !isPasswordValid) {
    //         return false;
    //     }
    //
    //     const code = document.getElementById('verification-code').value;
    //     if (!code) {
    //         verificationError.textContent = '인증 번호를 입력해 주세요.';
    //         return false;
    //     } else {
    //         verificationError.textContent = '';
    //     }
    //
    //     // 모든 유효성 검사가 통과되었을 때 폼 제출
    //     alert('이메일이 성공적으로 변경되었습니다.');
    // }
    //
    // // 공백 입력 방지
    // function preventWhitespace(event) {
    //     if (event.key === ' ') {
    //         event.preventDefault();
    //     }
    // }
    //
    // // 모든 입력 필드에 공백 입력 방지 적용
    // document.querySelectorAll('input').forEach(input => {
    //     input.addEventListener('keydown', preventWhitespace);
    // });

    function sendVerificationCode() {
        alert('인증 코드가 이메일로 발송되었습니다.');
        document.getElementById('verification-group').style.display = 'block';
    }

    function verifyCode() {
        const code = document.getElementById('verification-code').value;
        const verificationError = document.getElementById('verification-error');
        if (code === '123456') { // 예시 인증 코드
            alert('인증에 성공했습니다.');
            verificationError.textContent = '';
        } else {
            verificationError.textContent = '인증 코드가 올바르지 않습니다.';
        }
    }

    function validateEmail() {
        const email = document.getElementById('email').value;
        const emailError = document.getElementById('email-error');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!email) {
            emailError.textContent = '이메일을 입력해 주세요.';
            return false;
        } else if (!emailRegex.test(email)) {
            emailError.textContent = '유효한 이메일 주소를 입력해 주세요.';
            return false;
        } else {
            emailError.textContent = '';
            return true;
        }
    }

    function validatePassword() {
        const password = document.getElementById('password').value;
        const passwordError = document.getElementById('password-error');

        if (!password) {
            passwordError.textContent = '비밀번호를 입력해 주세요.';
            return false;
        } else {
            passwordError.textContent = '';
            return true;
        }
    }

    function validateForm() {
        const isEmailValid = validateEmail();
        const isPasswordValid = validatePassword();
        const verificationError = document.getElementById('verification-error');

        if (!isEmailValid || !isPasswordValid) {
            return false;
        }

        const code = document.getElementById('verification-code').value;
        if (!code) {
            verificationError.textContent = '인증 번호를 입력해 주세요.';
            return false;
        } else {
            verificationError.textContent = '';
        }

        alert('이메일이 성공적으로 변경되었습니다.');
    }

    function preventWhitespace(event) {
        if (event.key === ' ') {
            event.preventDefault();
        }
    }

    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('keydown', preventWhitespace);
        input.addEventListener('input', (event) => {
            if (event.target.id === 'email') {
                validateEmail();
            } else if (event.target.id === 'password') {
                validatePassword();
            }
        });
    });
</script>



</body>
</html>
